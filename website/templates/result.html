{% extends "base.html" %}

{% block body %}

<!--[if lt IE 9]><script language="javascript" type="text/javascript" src="{{ STATIC_URL }}js/jqplot/excanvas.js"></script><![endif]-->
<script language="javascript" type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jquery.jqplot.min.js"></script>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}js/jqplot/jquery.jqplot.min.css" />

<div class="container">
<table class="table table-striped table-bordered table-condensed table-hover">
    <caption><h4>Result Info</h4></caption>
    <tbody>
    <tr>
        <td><div class="text-right">ID</div></td>
        <td>{{ result.pk }}</td>
    </tr>
    <tr>
        <td><div class="text-top text-right">DB Conf</div></td>
        <td><a href="/db_conf/?id={{ result.db_conf.pk }}">{{ result.db_conf.name }}</a></td>
    </tr>
    <tr>
        <td><div class="text-right">Benchmark Conf</div></td>
        <td><a href="/benchmark_conf/?id={{ result.benchmark_conf.pk }}">{{ result.benchmark_conf.name }}</a></td>
    </tr>
    <tr>
        <td><div class="text-right">Experiment Time</div></td>
        <td>{{ result.timestamp }}</td>
    </tr>
    <tr>
        <td><div class="text-right">Overall Throughout</div></td>
        <td>{{ result.throughput }}</td>
    </tr>
    <tr>
        <td><div class="text-right">Overall 99% Latency</div></td>
        <td>{{ result.p99_latency }}</td>
    </tr>
    <tr>
        <td><div class="text-right">Sampled data</div></td>
        <td><a href="/get_result_data_file/?id={{ result.pk }}&type=sample">Download</a></td>
    </tr>
    <tr>
        <td><div class="text-right">Raw data</div></td>
        <td><a href="/get_result_data_file/?id={{ result.pk }}&type=raw">Download</a></td>
    </tr>
    </tbody>
</table>
</div>

<hr>

<div class="container">
<div class="row">

<div id="sidebar" class="col-md-3">
<div id="metric">
    <div><h4>Plot Metrics</h4></div>
    <div class="checkbox boxbody">
        <ul>
        {% for metric in metrics %}
        <li><label><input type="checkbox" name="metric" value="{{ metric }}" /> {{ metric_meta|get_item:metric|get_item:"print" }}</label></li>
        {% endfor %}
        </ul>
    </div>
</div>
</div>

<div class="col-md-9">
    <div id="content">
        <div id="plotgrid" class="plotcontainer"></div>
    </div>
</div>
</div>
</div>

<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.cursor.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.highlighter.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.dateAxisRenderer.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.categoryAxisRenderer.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.canvasTextRenderer.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.canvasAxisLabelRenderer.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.canvasAxisTickRenderer.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/jqplot/jqplot.barRenderer.min.js"></script>

<script type="text/javascript" src="{{ STATIC_URL }}js/result.js"></script>

<script type="text/javascript">
$(function() {
    ResultTimeline.init({
        data: {{ data|safe }},
        metrics: [{% for metric in default_metrics %}"{{ metric }}", {% endfor %}],
    });
});
</script>

{% endblock body %}
