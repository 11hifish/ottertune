{% extends "base.html" %}

{% block body %}
<div>
<form action="/update_project/" method="POST"> {% csrf_token %}
    <table class="table table-striped table-bordered table-nonfluid">
        <tr>
            <td align="right"><label for="name">Name:</label></td>
            <td><input type="text" id="name" name="name" value="{{ project.name }}" maxlength="50" required></td>
        </tr>
        <tr>
            <td valign="top" align="right"><label for="description">Description:</label></td>
            <td><textarea id="description" name="description" maxlength="500" rows="5" required>{{ project.description }}</textarea></td>
        </tr>
        <tr>
            <td align="right"><label for="environment">Environment:</label></td>
            <td>
                <select id="environment" name="environment" required>
                    {% for env in environments %}
                        <option value="{{ env.pk }}">{{ env.name }}</option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        {% if project %}
        <tr>
            <td align="right"><label for="upload_code">Upload Code:</label></td>
            <td><div id="upload_code">{{ project.upload_code }}</div></td>
        </tr>
        <tr>
            <td align="right"><label>Last update:</label></td>
            <td>{{ project.last_update }}</td>
        </tr>
        <tr>
            <td align="right"><label>Creation time:</label></td>
            <td>{{ project.creation_time }}</td>
        </tr>
        {% endif %}
    </table>
    <button class="btn" type="submit" name="id" value="{{ project.pk }}">Submit</button>
    {% if project %}
    <button class="btn" type="submit" name="id_new_code" value="{{ project.pk }}">Submit & Get a new upload code</button>
    <a class="btn" href="/project/?id={{ project.pk }}">Cancel</a>
    {% else %}
    <a class="btn" href="/">Cancel</a>
    {% endif %}
</form>

{% if project %}
<script language="JavaScript">
    $(document).ready(function() {
        $("select#environment").val("{{ project.environment.pk }}");
    });
</script>
{% endif %}

{% endblock body %}
